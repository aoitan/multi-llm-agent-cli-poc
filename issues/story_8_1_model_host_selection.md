# ストーリー 8.1: モデルホスト指定要件の実装

## 概要
エピック「Ollama 複数ホスト接続サポート」の第一段階として、モデル指定文字列にホスト情報を含める機能とフォールバックロジックを TypeScript 実装に導入します。要件は `doc/ollama_multi_host_support_requirements.md` を基にします。

## 受け入れ条件
- [ ] モデル指定に `model@https://remote.example.com` のような形式を認識し、ホストとモデル名に分離できる。
- [ ] ホスト未指定時は `APP_OLLAMA_URL` (定義があれば) を使用し、未定義の場合は `http://localhost:11434` を使用する。
- [ ] ホスト解決ロジックの単体テストが追加され、成功ケース・フォールバック・不正入力 (例: 不正 URL) を検証している。
- [ ] エラーメッセージに試行したホストが含まれる。

## 進め方のガイド
- 既存の `chatWithOllama` 実装を参照し、接続先 URL を決定する前にモデル文字列をパースする仕組みを追加してください。
- パースロジックはユーティリティ関数化し、将来的な再利用や Python との共有を意識した構造にすると良いです。
- 既存の JSON 出力モード仕様 (ログ抑制) を壊さないよう、デバッグログの扱いに注意してください。

## 関連タスク
* [ ] [タスク 8.1.1: モデル文字列パーサー実装とテスト](task_8_1_1_model_string_parser.md)
* [ ] [タスク 8.1.2: chatWithOllama のホスト解決拡張](task_8_1_2_extend_chatwithollama_host_resolution.md)

## 依存関係 / リスク
- 既存のワークフロー定義でモデル ID をハードコードしている場合、ホストを含む形式に変更する必要があるかもしれない。
