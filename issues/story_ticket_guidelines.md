# ストーリーチケット作成ガイドライン

## 目的
ストーリーはエピックの成功指標をプロダクト価値単位に分割し、ユーザー視点で達成状態を定義するチケットです。ストーリー完了時に提供される機能・振る舞い・検証方法を明確に記述します。

## 作成手順
1. 親エピックの受け入れ条件を再確認し、ストーリーでカバーすべき成果を切り出す。
2. 完了済みストーリー (例: [`issues/completed/story_4_2_implement_dynamic_workflow_adaptation.md`](completed/story_4_2_implement_dynamic_workflow_adaptation.md)) を参照して、構成・トーン・チェックリスト形式を合わせる。
3. 受け入れ条件を「振る舞い」「スコープ」「品質証明」の観点で整理し、チェックリストに落とし込む。
4. 必要なタスク分解を行い、関連タスク欄にチェックリスト形式で登録する。

## 必須セクション
- **タイトル:** `# ストーリー <エピックID>.<連番>: <名前>` 形式で記述する。
- **概要:** ユーザーストーリーとしての価値、対象ワークフロー、期待する成果を記載する。
- **受け入れ条件 (チェックリスト必須):** エンドツーエンドで検証可能な条件を `- [ ]` 形式で列挙し、テスト観点やログ出力確認なども含める。
- **進め方/ガイド:** 推奨する進め方や検証順序を明示する。TDD や段階的な統合など、過去事例で採用したワークフローを参考に記述する。
- **関連タスク:** 各タスクを `* [ ] [タスク <ID>: <タイトル>](task_...md)` 形式で記載し、作成済みの場合は相対リンクを張る。未作成のタスクは占位名で記載し、作成後にリンクを更新する。
- **依存関係/リスク (任意):** 他ストーリーや外部要素への依存がある場合は明示する。

## 受け入れ条件チェックリスト例
```
## 受け入れ条件
- [ ] レビュアーエージェントが英語で応答した場合、自動で再指示が送られる。
- [ ] 判定結果が `logs/workflow.log` に INFO レベルで出力される。
- [ ] 親エピックで定義した日本語応答遵守率を測定できるメトリクスが準備されている。
- [ ] 想定ユーザーフローをカバーする統合テストが追加されている。
```

## ベストプラクティス
- 親エピックとのトレーサビリティを担保するため、概要の冒頭で対象エピック名を明示する。
- 受け入れ条件は「動作が確認できる状態」を意識し、検証手段やファイルパスを具体的に記す。
- 完了済みタスク例 (例: [`issues/completed/story_5_2_2_adapt_ab_test_runner_for_language_support.md`](completed/story_5_2_2_adapt_ab_test_runner_for_language_support.md)) のように、関連タスク欄では完了状態をチェックマークで管理する。
- 作業ガイドには、既存スクリプト (`scripts/`, `main_evaluation.py` など) やテスト (`npm test`, `pnpm test`) の実行方法を記載し、検証フローを統一する。

## テンプレート
```
# ストーリー <エピックID>.<番号>: <名前>

## 概要
<ユーザーストーリー / 価値記述>

## 受け入れ条件
- [ ] <条件1>
- [ ] <条件2>

## 進め方のガイド
<推奨する進め方や検証手順>

## 関連タスク
* [ ] [タスク <ID>: <タイトル>](task_...md)

## 依存関係 / リスク
- <依存1>
```
