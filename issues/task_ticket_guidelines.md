# タスクチケット作成ガイドライン

## 目的
タスクはストーリーを達成するための実装・検証単位を明確化し、担当者が迷わず着手できるようにするための最小作業ブロックです。作業範囲・完了条件・検証手段を具体的に記述します。

## 作成手順
1. 親ストーリーの受け入れ条件を確認し、タスクで満たすべき観点を切り出す。
2. 完了済みタスク (例: [`issues/completed/task_6_1_1_implement_regex_language_detection.md`](completed/task_6_1_1_implement_regex_language_detection.md)) を参考に、概要・目的・チェックリストの粒度を合わせる。
3. 実装ステップと検証ステップを `- [ ]` 形式で整理し、担当者が完了状態を記録できるようにする。
4. 影響範囲・テスト・成果物 (PR、ドキュメント、スクリプト) を明記する。

## 必須セクション
- **タイトル:** `# タスク <エピックID>.<ストーリーID>.<番号>: <名前>` 形式で記載する。
- **概要:** タスクの狙い、想定する変更ポイント、成果物イメージを端的に説明する。
- **目的:** 仕事の背景や期待する改善効果を記述し、ストーリー/エピックとの整合を確認できるようにする。
- **受け入れ条件 (チェックリスト必須):** 実装・検証の完了を判断する条件を `- [ ]` 形式で列挙する。テスト・ログ・ドキュメント更新など、検証手段を具体的に書く。
- **作業手順 (チェックリスト必須):** 推奨する実装ステップや検証順序を `1. [ ]` または `- [ ]` 形式で記載する。
- **検証/テスト:** 実行コマンド例 (`npm test`, `pnpm run lint` など) や結果確認方法を明示する。
- **アウトプット:** 反映が必要なファイル、PRの対象、通知先などを整理する。
- **関連情報 (任意):** 参考リンク、既存実装、依存タスクを記載する。

## 受け入れ条件・作業手順チェックリスト例
```
## 受け入れ条件
- [ ] `src/utils/languageGuard.ts` に閾値可変の判定関数が実装されている。
- [ ] 判定結果が単体テスト `languageGuard.test.ts` でカバーされている。
- [ ] ドキュメント `doc/language-guard.md` が更新されている。

## 作業手順
1. [ ] 既存の判定ロジックを調査し、再利用できる正規表現を洗い出す。
2. [ ] 新規ユーティリティを TDD で実装し、テストを追加する。
3. [ ] `npm test -- languageGuard` を実行し、テストがグリーンであることを確認する。
4. [ ] 受け入れ条件のチェックを行い、必要に応じてストーリーチケットに進捗を反映する。
```

## ベストプラクティス
- 完了済みタスクに倣い、チェックリストではファイルパスやコマンドを具体的に記載して検証容易性を高める。
- レビューフローを明示したい場合は、作業手順の最後に「PR作成」「レビュワーアサイン」のチェック項目を追加する。
- バグ再発防止や品質確保の観点で、必要なテスト種類 (単体/統合/スナップショット) を検証セクションで明記する。
- ドキュメント更新が伴う場合は、対象ファイルとリンク先をアウトプット欄に明記することで抜け漏れを防ぐ。

## テンプレート
```
# タスク <エピックID>.<ストーリーID>.<番号>: <名前>

## 概要
<タスクの狙い>

## 目的
<背景や期待する効果>

## 受け入れ条件
- [ ] <条件1>
- [ ] <条件2>

## 作業手順
1. [ ] <ステップ1>
2. [ ] <ステップ2>

## 検証 / テスト
- `npm test -- <対象>`
- <その他の確認方法>

## アウトプット
- <更新するファイルや成果物>

## 関連情報
- <参考リンク>
```
