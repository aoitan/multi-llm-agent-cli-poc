# タスク: 入力検証とセキュリティ強化の実装

## 概要
`fillTemplate`関数でのユーザー入力直接置換や環境変数の不適切な扱いなど、セキュリティ脆弱性を解決し、入力検証機能を実装します。

## 背景 / きっかけ
- `src/agent.ts:L403-L412` の`fillTemplate`関数でインジェクション攻撃のリスクが存在
- `src/ollamaApi.ts:L23`の環境変数バリデーション不足
- `scripts/ab_test_runner.py:L40-L48`でsubprocessエラー出力による情報漏洩リスク

## 実装内容
- [ ] `fillTemplate`関数にサニタイゼーション機能を追加
- [ ] 環境変数`APP_OLLAMA_URL`のバリデーション強化
- [ ] subprocess実行時のエラー出力制限
- [ ] ユーザー入力の型検証とサイズ制限

## 受け入れ条件
- [ ] テンプレート置換時に悪意のある入力が無害化される
- [ ] 不正な環境変数設定時に適切なエラーメッセージが表示される
- [ ] subprocess失敗時に機密情報が標準出力に含まれない
- [ ] セキュリティテストが追加され、CI で実行される

## 優先度
High - セキュリティ脆弱性のため

## 作業工数見積もり
3-4 時間

## 関連ファイル
- `src/agent.ts` (fillTemplate関数)
- `src/ollamaApi.ts` (環境変数処理)
- `scripts/ab_test_runner.py` (subprocess実行)

## 関連タスク
- task_10_2_1 (エージェントモジュール責任分離)