# タスク 10.1.2: 協調フロー統合テストの再有効化

## 概要
`src/__tests__/agent.test.ts` の協調フローテストが `describe.skip` で無効化されており、リグレッションを検知できません。テストを復旧し、モックを整備して CI で安定実行させます。

## 目的
協調ワークフローの主要シナリオを自動テストで担保し、欠落 API などの再発を防ぐ。

## 受け入れ条件
- [ ] `describe.skip` が解除され、Thinker/Reviewer/Summarizer のやり取りと再指示パスを検証している。
- [ ] テストが本番ファイルを書き換えず、ローカル/CI で安定して成功する。
- [ ] 回帰時に原因を特定しやすいよう、テスト名とメッセージが明確である。

## 作業手順
1. [ ] 既存のテストケースを分析し、モック応答や期待値を最新仕様に合わせて更新する。
2. [ ] `chatWithOllama` モックの共通化やファクトリ関数を追加し、冗長な重複を削減する。
3. [ ] `npm test` を実行し、CI を想定した環境でも安定することを確認する。

## 検証 / テスト
- `npm test -- agent`
- 必要に応じて `npm test -- --runInBand`

## アウトプット
- 更新された `src/__tests__/agent.test.ts`
- 追加されたモックユーティリティ (必要に応じて)

## 関連情報
- タスク 10.1.1 (API 復旧)
- `chatWithOllama` のテストモック
