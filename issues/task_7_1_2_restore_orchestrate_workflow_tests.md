# タスク 7.1.2: orchestrateWorkflow テストスイートの再有効化と拡張

## 概要
`src/__tests__/agent.test.ts` の `describe.skip` を解消し、ワークフロー実行と日本語ガードの挙動を検証するテストケースを復元・拡張する。

## 目的
ワークフロー構成の仕様をテストで表現し、リファクタリング時も振る舞いを担保できるようにする。

## 受け入れ条件
- [ ] `agent.test.ts` の主要スイートが有効化され、少なくとも正常系・再指示あり・再指示不要の 3 パターンを検証する。
- [ ] `chatWithOllama` モックがテストケースごとの差分を表現できるよう整理されている。
- [ ] 日本語ガードに関するログ出力や retry 回数の期待値がテストで明示される。
- [ ] 新規テストは TDD を想定したコメントまたは説明が付記され、開発者が仕様を読み取れる。

## 作業手順
1. [ ] スキップされている `describe` を再有効化し、モックの共通セットアップを `beforeEach` 等に抽出する。
2. [ ] 正常系 (再指示不要) と再指示を発生させるケースを個別の `it` で表現する。
3. [ ] 0 サイクルや初期化失敗など、境界条件を追加でカバーする。
4. [ ] `npm test -- agent` を実行し、テストがグリーンであることを確認する。

## 検証 / テスト
- `npm test -- agent`
- テストカバレッジレポート (必要に応じて `npm test -- --coverage`)

## アウトプット
- 更新された `src/__tests__/agent.test.ts`
- 必要なら追加するモック補助ユーティリティ

## 関連情報
- `src/agent.ts` の `orchestrateWorkflow` 実装
- `src/__tests__/languageGuardIntegration.test.ts` の既存テスト
