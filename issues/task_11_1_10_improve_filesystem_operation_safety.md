
# Task: ファイルシステム操作の安全性向上

## 概要

`scripts/prepare_evaluation.py` 内で実行される `shutil.rmtree()` によるディレクトリ削除処理に、意図しないパスが指定されることを防ぐための安全チェックを追加します。

## 背景

現在、`prepare_evaluation.py` は評価実行前に、タイムスタンプに基づいて生成されたディレクトリ（例: `eval/model_comparison/202310271030`）をクリーンアップするために `shutil.rmtree()` を使用しています。この処理は便利ですが、パスの構築ロジックに万が一の不具合があった場合、意図しない重要なディレクトリを再帰的に削除してしまうというわずかなリスクを内包しています。

このタスクは、そのようなリスクを低減し、ファイルシステム操作の安全性を高めることを目的とします。

## 作業内容

1.  `prepare_evaluation.py` の `prepare_evaluation` 関数を修正します。
2.  `shutil.rmtree(base_dir)` を呼び出す直前に、削除対象の `base_dir` が期待される親ディレクトリ（この場合は `eval/model_comparison`）の配下に確實に存在することを検証するアサーションまたはチェック処理を追加します。
    -   例: `assert 'eval/model_comparison' in os.path.abspath(base_dir)`
3.  もしパスが期待される構造でない場合は、処理を中止し、明確なエラーメッセージを出力するようにします。

## 完了条件

-   `prepare_evaluation.py` のディレクトリ削除処理の前に、削除対象パスの妥当性を検証する安全チェックが実装されていること。
-   不正なパスが指定された場合に、ディレクトリ削除が実行されず、エラーが報告されること。
