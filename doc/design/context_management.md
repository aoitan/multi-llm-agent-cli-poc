# コンテキスト・情報共有の仕組み（神経系）設計書

## 概要

本機能は、エージェント間での知識の受け渡しを可能にし、「集合知」を形成することを目的とする。これにより、各エージェントが独立して動作するだけでなく、互いの成果を参照し、連携してタスクを遂行できるようになる。

## 主要機能

### 1. 共有ワークスペース

- **目的**: 全エージェントが読み書きできる共通のデータ領域を提供し、中間成果物や共有情報を保存する。
- **詳細**: 
    - テキスト、コード片、データなど、様々な形式の中間成果物を保存できる。
    - 各エージェントは、このワークスペースから必要な情報を読み込み、自身の処理結果を書き込む。
    - バージョン管理や変更履歴の追跡機能を検討する。
- **入力**: 各エージェントからの情報、中間成果物
- **出力**: 共有情報、中間成果物

### 2. コンテキスト管理・最適化機能

- **目的**: エージェントに情報を渡す際、タスク遂行に必要な情報のみを抽出・要約して与える。これにより、ローカルLLMの限られたコンテキスト長を効率的に利用し、推論精度を向上させる。
- **詳細**: 
    - 共有ワークスペースから、現在のタスクに関連する情報をフィルタリングする。
    - フィルタリングされた情報をLLMのコンテキスト長に合わせて要約する（例: 重要なキーワード抽出、要点のみの抽出、テキストの階層化、優先度付きサマリーなど）。
    - 過去の会話履歴や関連するドキュメントを動的にコンテキストに含める。
- **入力**: 共有ワークスペースの情報、現在のタスク、LLMのコンテキスト長制限
- **出力**: LLMに渡す最適化されたコンテキスト

## 実装方針

- 共有ワークスペースは、ファイルシステム上の特定のディレクトリ、またはシンプルなインメモリデータベースとして実装する。
- コンテキスト管理・最適化は、LLM自身に要約やフィルタリングを指示するプロンプトエンジニアリング、またはキーワード抽出などのNLP技術を組み合わせる。

## 考慮事項

- 大量の情報が共有ワークスペースに蓄積された場合のパフォーマンス。
- コンテキスト最適化の精度と、情報損失のリスク。
- エージェント間の情報共有の粒度とタイミング。
