> **Deprecated:** この設計書はMVP初期の構想です。最新のコンテキスト共有仕様は `doc/design/workflow_architecture_overview.md` を参照してください。

# コンテキスト・情報共有の仕組み（神経系）設計書 (MVP範囲)

## 概要

MVPフェーズでは、エージェント間での知識の受け渡しを、ファイルベースの単純な情報共有によって実現する。これにより、各エージェントが独立して動作するだけでなく、互いの成果を参照し、連携してタスクを遂行できるようになる。

## 主要機能

### 1. 共有ワークスペース (ファイルベース)

- **目的**: 全エージェントが読み書きできる共通のデータ領域（特定のディレクトリ）を提供し、中間成果物や共有情報を保存する。
- **詳細**: 
    - テキスト、コード片など、シンプルな形式の中間成果物をファイルとして保存する。
    - 各エージェントは、このワークスペース内の決められたファイル名（例: `output.txt`）から情報を読み込み、自身の処理結果をファイルとして書き込む。
- **入力**: 各エージェントからの情報、中間成果物
- **出力**: 共有情報、中間成果物（ファイル）

### 2. コンテキスト管理 (限定的)

- **目的**: エージェントに情報を渡す際、タスク遂行に必要な情報をファイルとしてそのまま渡す。高度な要約やフィルタリングはMVPでは行わない。
- **詳細**: 
    - 共有ワークスペースから、現在のタスクに関連するファイルをそのままLLMに渡す。
    - 過去の会話履歴や関連するドキュメントも、必要に応じてファイルとしてLLMに渡す。
- **入力**: 共有ワークスペースの情報、現在のタスク
- **出力**: LLMに渡すファイルパスまたはファイル内容

## 実装方針

- 共有ワークスペースは、ファイルシステム上の特定のディレクトリとして実装する。
- コンテキスト管理は、ファイルの内容をそのままLLMに渡すシンプルな方法を採用する。

## 考慮事項

- 大量の情報が共有ワークスペースに蓄積された場合のパフォーマンス（MVP以降のフェーズで検討）。
- LLMのコンテキスト長制限への対応（MVPでは、長すぎる場合はそのまま渡してLLM側で対応させる）。